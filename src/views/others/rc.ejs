<menu id="rcMenu" class="rc-menu" active="false">
    <div class="rc-options">
        <p class="rc-option icon" onclick="newPage(this)" href="https://github.com/MrlolDev"><i class="fab fa-github"></i>Github</p>
    </div>
</menu>
<script>
  function newPage(page) {
      window.open(page.attributes.href.value)
  }
  var showingMenu = false;
    var nowSubMenu = null;
          if (document.addEventListener) {
    document.addEventListener('contextmenu', function(e) {
      drawMenu(e.pageX, e.pageY);
      e.preventDefault();
    }, false);
    document.addEventListener('click', function(e) {
      if(showingMenu == true) {
        removeMenu()
      e.preventDefault();
      }
    }, false);
  } else {
    document.attachEvent('oncontextmenu', function() {
      alert("You've tried to open context menu");
      window.event.returnValue = false;
    });
  }
  function showSub(id, t) {
    if(nowSubMenu != null) {
      unshowSub(nowSubMenu)
    }
    nowSubMenu = id
    var subMenu = document.querySelector(`menu#${id}`)
    var x = getOffset(t)
    var menuWidth = screen.width * 15 / 100
    console.log(menuWidth)
    if(subMenu) {
      subMenu.attributes.active.value ="true"
      subMenu.style.left = x.left+menuWidth + "px"
      subMenu.style.top = x.top + "px"
    }
  }
  function getOffset( el ) {
      var _x = 0;
      var _y = 0;
      while( el && !isNaN( el.offsetLeft ) && !isNaN( el.offsetTop ) ) {
          _x += el.offsetLeft - el.scrollLeft;
          _y += el.offsetTop - el.scrollTop;
          el = el.offsetParent;
      }
      return { top: _y, left: _x };
  }
  
  function unshowSub(id) {
    var subMenu = document.querySelector(`menu#${id}`)
    if(subMenu) {
      subMenu.attributes.active.value ="false"
    }
  }
  function deleteNowSubMenu() {
    if(nowSubMenu != null) {
      var subMenu = document.querySelector(`menu#${nowSubMenu}`)
    if(subMenu) {
      subMenu.attributes.active.value ="false"
    }
    nowSubMenu=null
    }
  
  }
  function drawMenu(x, y) {
    showingMenu = true
      var menu = document.querySelector("menu#rcMenu")
      console.log(menu)
      menu.attributes.active.value = "true"
      menu.style.left = (x- 10)+"px";
      menu.style.top = (y - 10)+"px";
  }
  function removeMenu() {
    showingMenu = false
      var menu = document.querySelector("menu#rcMenu")
      menu.attributes.active.value = "false"
      if(nowSubMenu != null) {
      unshowSub(nowSubMenu)
    }
  }
  var allOptions = document.querySelectorAll('menu.rc-menu p.rc-option')
  console.log(allOptions)
  for (var i = 0; i < allOptions.length; i++) {
    if(!allOptions[i].attributes.sub) {
      allOptions[i].setAttribute('onmouseover',"deleteNowSubMenu()")  
    }
  }
  </script>